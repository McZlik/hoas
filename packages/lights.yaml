light:
  - platform: template
    lights:
      hallway_light:
        friendly_name: "Hallway Light"
        value_template: "{{ is_state('switch.hallway_light_switch', 'on') }}"
        turn_on:
          service: switch.turn_on
          target:
            entity_id: switch.hallway_light_switch
        turn_off:
          service: switch.turn_off
          target:
            entity_id: switch.hallway_light_switch

automation:
  - alias: Hallway Light Motion Extended (Blueprint)
    id: hallway_light_motion_extended
    use_blueprint:
      path: Blackshome/sensor-light.yaml
      input:
        motion_trigger:
          - binary_sensor.hallway_motion_sensor_occupancy
        light_switch:
          entity_id: light.hallway_light
        time_delay: 0.5
        include_ambient: ambient_enabled
        ambient_light_sensor: sensor.hallway_motion_sensor_illuminance
        ambient_light_options: ambient_light_option_enabled

  - alias: Sunset lights
    id: sunset_lights
    description: Activate lights 30 min before sunset
    triggers:
      - trigger: sun
        event: sunset
        offset: "-00:30:00"
    conditions: []
    actions:
      - action: light.turn_on
        metadata: {}
        data:
          brightness_pct: 25
        target:
          entity_id: light.dining_room_dimmer
      - action: light.turn_on
        metadata: {}
        data:
          brightness_pct: 75
        target:
          entity_id: light.living_room_dimmer
    mode: single