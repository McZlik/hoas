light:
  - platform: template
    lights:
      hallway_light:
        friendly_name: "Hallway Light"
        unique_id: hallway_light
        value_template: "{{ is_state('switch.hallway_light_switch', 'on') }}"
        turn_on:
          service: switch.turn_on
          target:
            entity_id: switch.hallway_light_switch
        turn_off:
          service: switch.turn_off
          target:
            entity_id: switch.hallway_light_switch

  - platform: group
    name: "Office Lights"
    unique_id: office_lights_group
    entities:
      - light.office_ceiling_lamp_01
      - light.office_ceiling_lamp_02
      - light.office_ceiling_lamp_03

automation:
  - alias: Sunset lights
    id: sunset_lights
    description: Activate lights 30 min before sunset
    triggers:
      - trigger: sun
        event: sunset
        offset: "-00:30:00"
    conditions: []
    actions:
      - action: light.turn_on
        metadata: {}
        data:
          brightness_pct: 25
        target:
          entity_id: light.dining_room_dimmer
      - action: light.turn_on
        metadata: {}
        data:
          brightness_pct: 75
        target:
          entity_id: light.living_room_dimmer
    mode: single

  - alias: Office lights
    id: office_lights
    description: Turn on/off office lights based on presence
    mode: single
    triggers:
      - trigger: state
        entity_id:
          - binary_sensor.office_presence_occupancy
    conditions: [ ]
    actions:
      - choose:
          - conditions:
              - condition: state
                entity_id: binary_sensor.office_presence_occupancy
                state: "on"
            sequence:
              - action: light.turn_on
                metadata: { }
                data: { }
                target:
                  entity_id: light.office_lights_group
          - conditions:
              - condition: state
                entity_id: binary_sensor.office_presence_occupancy
                state: "off"
            sequence:
              - action: light.turn_off
                metadata: { }
                data: { }
                target:
                  entity_id: light.office_lights_group

