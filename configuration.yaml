default_config:

# Basic Home Assistant Configuration
http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 10.0.0.0/8
    - 172.16.0.0/12
    - 192.168.0.0/16

# Add this to your Home Assistant configuration.yaml
# Location: /config/configuration.yaml inside the home-assistant pod

influxdb:
  api_version: 2
  ssl: false
  host: influxdb-influxdb2.influxdb 
  port: 80
  token: !secret influxdb_token
  organization: homeassistant
  bucket: homeassistant
  tags:
    source: homeassistant
  tags_attributes:
    - friendly_name
  include:
    entity_globs:
      - sensor.dsmr_*
      - sensor.currently_*
      - sensor.*_energy_*
      - sensor.*_power_*
      - sensor.*_wifi_*
    # Optionally add specific domains
    # domains:
    #   - sensor

# Update your recorder to EXCLUDE DSMR sensors from PostgreSQL
# (They'll be in InfluxDB instead)
recorder:
  db_url: !secret psql_string
  db_retry_wait: 15
  commit_interval: 1
  exclude:
    domains:
      - automation
      - updater
    entity_globs:
      - sensor.weather_*
#      - sensor.dsmr_*                    # Exclude DSMR from PostgreSQL (in InfluxDB)
#      - sensor.currently_*               # Exclude high-frequency energy sensors
      - sensor.*_wifi_*                  # Exclude WiFi signal sensors
      - image.*                          # Exclude Frigate image sensors
    entities:
      - sun.sun
      - sensor.last_boot
      - sensor.date
    event_types:
      - call_service




automation: !include automations.yaml

frontend:
  themes: !include_dir_merge_named themes

homeassistant:
  packages: !include_dir_named packages

lovelace:
  mode: yaml
  dashboards:
    desktop-dashboard:
      mode: yaml
      title: Desktop
      icon: mdi:monitor
      show_in_sidebar: true
      filename: ui-desktop.yaml
    smartmeter-example:
      mode: yaml
      title: SmartMeter
      icon: mdi:speedometer
      show_in_sidebar: true
      filename: example/smartmeter-dash2.yaml
  resources:
    - url: /hacsfiles/advanced-camera-card/advanced-camera-card.js
      type: module
    - url: /hacsfiles/apexcharts-card/apexcharts-card.js
      type: module
    - url: /hacsfiles/button-card/button-card.js
      type: module
    - url: /hacsfiles/kiosk-mode/kiosk-mode.js
      type: module
    - url: /hacsfiles/lovelace-card-mod/card-mod.js
      type: module
    - url: /hacsfiles/lovelace-mushroom/mushroom.js
      type: module
    - url: /hacsfiles/mini-graph-card/mini-graph-card-bundle.js
      type: module
    - url: /hacsfiles/modern-circular-gauge/modern-circular-gauge.js
      type: module
